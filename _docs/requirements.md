# 子供向け「神経衰弱」要件定義（ドラフト）

## 1. 目的・背景
- 目的: 幼児〜小学校低学年を主対象に、楽しく安全に遊べる「神経衰弱」を提供し、記憶力・注意力の向上を支援する。
- 成果: シンプルな操作、分かりやすいフィードバック、保護者が安心できる設計。

## 2. 対象ユーザー
- 主対象: 4〜8歳児。
- 同伴者: 保護者・指導者（設定や見守り）。

## 3. 対応プラットフォーム・環境
- 最小スコープ: ブラウザ（PC/タブレット）最新2世代のChrome/Edge/Safari。
- 画面サイズ: 最小 768×1024（縦横両対応）。
- 入力: タッチ操作/マウス操作。

## 4. ゲーム概要
- ルール: 裏向きカードを2枚ずつめくり、絵柄が一致したら獲得。全てのペアを取ったらクリア。
- プレイ時間: 3〜10分/回想定。
- オフライン: ネットワーク不要でプレイ可能（初期アセット同梱）。

## 5. ゲーム要件（機能）
- カードセット:
  - 枚数: 8・12・16・24枚など偶数で可変（難易度）。
  - モチーフ: 子供に馴染みのあるイラスト（動物・果物等）。
- ゲームフロー:
  - スタート画面 → 難易度選択 → ゲーム → リザルト → 再戦/難易度変更。
- 操作:
  - 大きなカードとボタン。タッチ領域は44px以上。
  - 誤タップ防止: アニメーション中の多重入力抑止。
- フィードバック:
  - 一致: やさしい効果音/アニメーション、スコア更新。
  - 不一致: 0.6〜1.0秒で自動的に裏返し、再操作可。
  - 進捗: 残りペア数や経過時間（任意表示）。
- 難易度:
  - カード枚数・タイマー有無・ヒント有無（初期はOFF、保護者が切替）。
- チュートリアル:
  - 初回起動時に1回だけ操作をガイド（スキップ可）。
- ヒント（任意機能）:
  - 一定回数、数秒間カードの位置をハイライト表示。
- リザルト:
  - クリア時間/手数/最高記録（ローカル保存、端末内のみ）。

## 6. 非機能要件
- パフォーマンス:
  - 初回表示 < 2秒（キャッシュ後 < 1秒）を目標。
  - アニメーションは60fps目標。メモリリーク無し。
- アクセシビリティ:
  - 色覚バリアフリー配色（色と形/模様の二重表現）。
  - 文字は最小14pt以上、主要ボタンは日本語ラベル。
  - 音声/振動のON/OFF切替（環境依存）。
- 安全性/プライバシー:
  - 個人情報・テレメトリ収集なし（解析が必要な場合も匿名・オプトイン）。
  - 広告/外部リンクなし。年齢不適切要素なし。
- オフライン:
  - PWAは将来対応候補。現段階はブラウザ常駐でオフライン可。

## 7. 設定（保護者向け）
- 難易度（カード枚数）選択。
- タイマー表示 ON/OFF。
- 効果音/振動 ON/OFF。
- ヒント機能 ON/OFF（回数指定）。

## 8. 画面要件（ワイヤーフレーム概要）
- スタート: タイトル、難易度ボタン（やさしい/ふつう/むずかしい）、設定、遊び方。
- ゲーム: グリッドレイアウトのカード、進捗表示、ポーズ/リスタート。
- リザルト: クリア演出、成績表示、もう一度/難易度へ。

## 9. データ要件
- 保存: 最高記録（難易度別）、設定、チュートリアル既読フラグ。
- 保管場所: ブラウザの`localStorage`（機密なし）。
- 消去: 設定からリセット可能。

## 10. 品質保証・受け入れ基準（抜粋）
- ルール:
  - 2枚同時選択後、一致なら場から除去しスコア加算。
  - 不一致なら指定時間後に自動で裏返る。操作はその後解禁。
- 入力:
  - アニメーション中の多重入力が無効化される。
  - 1タップ=1アクションで確実に反応する。
- レイアウト:
  - 768×1024で折り返しなくカードが見切れない。
- アクセシビリティ:
  - 色のみで情報を表現しない。効果音は視覚と冗長。
- 保存:
  - 設定変更が即時反映・永続化される。再起動後も維持。

## 11. スコープ外（初期リリース）
- オンライン対戦、ランキングサーバ、課金、SNS共有。
- アカウント/ログイン機能。
- 多言語展開（要望があれば後続対応）。

## 12. リスク・前提
- 子供向けイラストのライセンス確保（自作またはCC0）。
- 低スペック端末での描画負荷（画像最適化で軽減）。

## 13. 開発・運用
- 技術候補: HTML/CSS/TypeScript（軽量フレームワーク or 素のDOM）。
- コード規約: 型付け、関数は小さく、説明的命名、例外処理、不要機能は作らない（YAGNI）。
- ドキュメント: `_docs/`に実装ログ（yyyy-mm-dd_機能名.md）を追加。必要に応じREADME更新。

## 14. 未確定事項・要確認
1) 目標プラットフォームをWebのみで確定して良いか？（ネイティブ予定はあるか）
2) 目標端末（iPad/Chromebook中心など）の優先度。
3) 難易度プリセット（具体的な枚数）とデフォルト値。
4) 効果音の有無・音量規定、端末のミュート連動の方針。
5) 収集データの有無（初期は「なし」で良いか）。
6) イラストのトーン（写実/デフォルメ）とテーマ候補。
7) 初回チュートリアルの有無/長さ/再表示方法。

— 本ドキュメントはドラフトです。合意後に固定化し、変更履歴を管理します。
